# Mysql DB 생성 및 사용자 권한 부여

```sh
$ mysql -uroot -p
Enter password: <pssword input>

> create database <db_name>;
> use <db_name>;
> grant all privileges on <db_name>.* to '<user_name>'@'localhost';
```

## 명령어

```sh
# 디비 조회
show databases;
```

## 호스트 컴퓨터에서 도커 container mysql 접속

단순하게 -P 옵션으로 port를 지정해준다고 하더라도 컨테이너 쪽 mysql 에 접속할 수 없습니다.  

**정확히 말하면, 우리가 원하는 포트가 아니라 3306 기본 포트로만 접속되게 됩니다.** 

그 이유는 mysql에서 hostname을 명시하지 않거나 localhost로 지정해서 접속하게 되면, 조금은 특별한 방식으로 처리되기 때문입니다.

자세한 내용은 **[mysql 공식문서](https://dev.mysql.com/doc/refman/5.7/en/connecting.html)**, **[stackoverflow 답변](https://stackoverflow.com/questions/50160128/why-wont-mysql-client-use-the-port-i-specify)** 을 참조하시면 되지만,
요약하자면 localhost에 대한 연결의 경우 MySQL 프로그램은 **유닉스 소켓 파일을 사용**하여 로컬 서버에 연결을 시도합니다.
즉, 우리가 원하는 대로 **127.0.0.1에 TCP/IP로 연결하는 것이 아니라는 뜻**입니다. 

이를 해결하고자 한다면 2가지 방법이 있습니다. 

------

#### **1. mysql hostname 지정**

호스트는 따로 지정하지 않으면 localhost이며, 이렇게 되면 유닉스 소켓파일을 사용하여 연결시도를 한다고 했습니다.

바꿔 말하면 127.0.0.1 과 같이 지정 해 준다면, 우리가 원하는 TCP 방식으로 연결을 한다는 뜻입니다.

```bash
mysql -h 127.0.0.1 -u root -p -P 3307
```

이제 정상적으로 컨테이너 내부의 mysql에 접속할 수 있습니다.
