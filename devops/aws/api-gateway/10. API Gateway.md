# API Gateway

## 특징

* 개발자가 API를 손쉽게 생성, 게시, 유지 관리, 모니터링 및 보안 유지할 수 있도록 하는 완전관리형 서비스
* AWS에서 제공하는 API Gateway 서비스
* API Gateway가 API가 지나갈 수 있는 유일한 통로로 설정할 시 관리(로깅, 액세스 제어, 모니터링)가 편리
* API Gateway를 통해 Lambda와의 연동 가능(마이크로서비스, 서버리스에 적합)
* HTTP API, Rest API, Websocket API로 이루어져 있음
* API에 일괄적으로 인증을 붙일 수 있음(권한 부여)

![image](https://user-images.githubusercontent.com/92770273/143976646-f98232ba-0a36-4a83-b395-80ac9234ac42.png)



## Canary 배포

* Canary 릴리스 배포에서 전체 API 트래픽은 사전 구성된 비율로 프로덕션 릴리스와 Canary 릴리스로 임의로 분할된다. 일반적으로 Canary 릴리스에는 API 트래픽 중 작은 백분율이 주어지며, 프로덕션 릴리스가 나머지를 차지한다. 업데이트된 API 기능은 Canary를 통하는 API 트래픽에만 보인다. 예를 들어 사용자 전체의 90%는 프로덕션 릴리스를 사용하고 10%는 Canary 릴리스를 사용한다.
* Canary 트래픽을 적은 수준으로 유지하고 선택이 임의로 이루어지면 대부분의 사용자는 새 버전의 잠재적 버그로 인한 부정적 영향을 받지 않으며, 단일 사용자가 부정적 영향을 계속 받는 경우는 없다. 예를 들어 10%의 Canary 릴리스에서 버그가 발생했을 때 10%에 해당하는 사용자는 계속해서 버그가 있는 릴리스를 사용하지 않고 다음 번에는 안전한 90% 릴리스의 api를 사용하게 된다.
* 테스트 지표가 요구 사항을 통과한 후에는 Canary 릴리스를 프로덕션 릴리스로 승격하고 배포에서 Canary를 비활성화할 수 있다. 이렇게 하면 새 기능을 프로덕션 단계에서 사용할 수 있다.